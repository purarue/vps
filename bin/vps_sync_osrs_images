#!/usr/bin/env bash
# sync osrs images to cache, then to remote server

set -euo pipefail

echo 'Syncing OSRS images to server...' >&2

rsync -Pah --ignore-existing "$HPIDATA/runelite_screenshots" "$HOME/.cache"

# to optimize, run:
# cd ~/.cache/runelite_screenshots/
# list-images | parallel -k --eta -j+0 optipng -o 5 {}

# sync from ~/.cache/runelite_screenshots to remote server
exec rsync -Pavhz "$HOME/.cache/runelite_screenshots" vultr:./static_files >/dev/null
