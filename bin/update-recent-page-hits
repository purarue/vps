#!/usr/bin/env bash

set -o pipefail

main() {
    data="$(curl -sL 'https://sean.fish/api/page_hit/1' | jq -r .count)"
    # https://github.com/seanbreckenridge/is-integer
    if is-integer "$data" >/dev/null; then
        echo "$data" >"$XDG_CACHE_HOME/recent_page_hits.txt"
    fi
}

main || exit $?
